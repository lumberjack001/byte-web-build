(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5349],{33912:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/tools/record/edit/expense/[recordId]",function(){return t(27830)}])},94983:function(e,n,t){"use strict";var r=t(85893),l=t(78022),a=function(e){var n=e.heightTailwind,t=e.spinnerColor;return(0,r.jsx)("div",{className:"w-full ".concat(void 0===n?"h-[50vh]":n," flex items-center justify-center"),children:(0,r.jsx)(l.s5,{strokeColor:void 0===t?"#4E5AA5":t,strokeWidth:"4",animationDuration:"0.75",width:"40",visible:!0})})};n.Z=a},27830:function(e,n,t){"use strict";t.r(n);var r=t(14924),l=t(26042),a=t(99534),s=t(70603),i=t(85893),o=t(82580),d=t(9008),c=t.n(d),u=t(11163),x=t(67294),p=t(91444),h=t(16310),f=t(70757),m=t(74975),v=t(98423),g=t(45812),j=t(93890),y=t(63240),C=t(20823),w=t(94983),b=t(62523),Z=t(62339),N=t(79405),_=function(){var e,n,t=(0,x.useState)(null),d=t[0],f=t[1],m=(0,x.useState)(!1),_=m[0],q=m[1],R=(0,u.useRouter)().query.recordId,E=(0,N.mX)(R,{refetchOnMountOrArgChange:!0}),A=E.data,B=E.isLoading,D=E.isSuccess,S=(0,s.Z)((0,N.jZ)(),2),F=S[0],T=S[1].isLoading;return(0,x.useEffect)(function(){if(D&&!(0,Z.x)(null==A?void 0:A.data)&&(null==A?void 0:A.data)!==null){var e=null==A?void 0:A.data;f(e),q(!(0,Z.x)(e.services))}},[D,A]),(0,i.jsxs)("div",{children:[(0,i.jsxs)(c(),{children:[(0,i.jsx)("title",{children:"Edit expense records - Byte"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,i.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:B?(0,i.jsx)(w.Z,{heightTailwind:"h-[70vh]"}):(0,Z.x)(d)||null==d?(0,i.jsx)("div",{className:"w-full h-[70vh] flex items-center justify-center text-gray-400",children:"No data! Please refresh"}):(0,i.jsx)(o.J9,{enableReinitialize:!0,initialValues:(0,r.Z)({description:d.description,type:d.type,dealType:d.dealType,expenseCategory:d.expenseCategory,date:d.date,totalAmount:d.totalAmount},_?"services":"products",_?null==d?void 0:null===(e=d.services)||void 0===e?void 0:e.map(function(e){return e._id,(0,a.Z)(e,["_id"])}):null==d?void 0:null===(n=d.products)||void 0===n?void 0:n.map(function(e){return e._id,(0,a.Z)(e,["_id"])})),onSubmit:function(e){var n=e.expenseCategory,t=(0,a.Z)(e,["expenseCategory"]);console.log(n);var r=(0,l.Z)({},t,e.expenseCategory&&void 0!==e.expenseCategory&&{expenseCategory:e.expenseCategory});F({recordId:"".concat(R),data:r}).unwrap().then(function(){p.Am.success("Record updated successfully!")}).catch(function(e){var n;p.Am.error((null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message)||"Couldn't update record")})},validationSchema:h.Ry().shape((0,r.Z)({description:h.Z_().required("Required"),expenseCategory:h.Z_().nullable().notRequired().when("expenseCategory",{is:function(e){return null==e?void 0:e.length},then:function(e){return e.min(3)}}),date:h.hT().required("Required")},_?"services":"products",_?h.IX().of(h.Ry().shape({name:h.Z_().required("Required"),cost:h.Rx().min(5,"can't be less than ₦5").required("Required")})):h.IX().of(h.Ry().shape({name:h.Z_().required("Required"),quantity:h.Rx().min(1,"can't be less than 1").required("Required"),unitPrice:h.Rx().min(5,"can't be less than ₦5").required("Required")}))),[["expenseCategory","expenseCategory"]]),children:function(e){var n=e.values,t=e.touched,r=e.errors,l=e.handleChange,a=e.handleBlur,s=e.handleSubmit,d=e.setFieldValue,c=e.dirty;return(0,i.jsxs)(o.l0,{onSubmit:function(e){return e.preventDefault()},className:"flex flex-col w-full h-full gap-6",children:[(0,i.jsx)("div",{className:"w-full flex-col flex gap-6",children:_?(0,i.jsx)(o.F2,{name:"services",render:function(e){var t=e.push,r=e.remove;return(0,i.jsx)(g.Z,{values:n,push:t,remove:r,handleChange:l,handleBlur:a,setFieldValue:d})}}):(0,i.jsx)(o.F2,{name:"products",render:function(e){var t=e.push,r=e.remove,s=e.replace;return(0,i.jsx)(i.Fragment,{children:(null==n?void 0:n.products)!==void 0&&(null==n?void 0:n.products).map(function(e,o){return(0,i.jsx)(v.Z,{product:e,productIndex:o,values:n,push:t,replace:s,remove:r,handleChange:l,handleBlur:a,setFieldValue:d},o)})})}})}),(0,i.jsxs)("div",{className:"flex w-full h-fit flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,i.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Other information"}),(0,i.jsxs)("div",{className:"w-full grid grid-cols-3 gap-4",children:[n.expenseCategory?(0,i.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,i.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Category"}),(0,i.jsx)(C.Z,{name:"expenseCategory",onChange:l,onBlur:a,value:n.expenseCategory,placeholder:"Enter category",type:"text"}),t.expenseCategory&&r.expenseCategory&&(0,i.jsx)(y.Z,{message:r.expenseCategory||""})]}):null,(0,i.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,i.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Description"}),(0,i.jsx)(b.Z,{rows:5,name:"description",onChange:l,onBlur:a,value:n.description,placeholder:"Enter description"}),t.description&&r.description&&(0,i.jsx)(y.Z,{message:r.description||""})]}),(0,i.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,i.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Date"}),(0,i.jsx)(C.Z,{name:"date",onChange:l,onBlur:a,value:new Date(n.date).toLocaleDateString("en-CA")||"2022-01-01",placeholder:"Date",type:"date"}),t.date&&r.date&&(0,i.jsx)(y.Z,{message:r.date||""})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col w-full items-start gap-6 pb-6",children:[(0,i.jsxs)("div",{className:"flex justify-between py-4 px-6 bg-[#F8F9FA] rounded-2xl w-full",children:[(0,i.jsx)("p",{className:"text-[#808691] text-base font-normal",children:"Total Amount"}),(0,i.jsx)("p",{className:"text-[#19A97B] text-xl font-normal",children:"₦".concat(n.totalAmount.toLocaleString("en-US"))})]}),(0,i.jsx)(j.Z,{loading:T,disabled:!c||T,click:s,title:"Save changes",type:"large",color:"btnPrimary"})]})]})}})})]})};_.getLayout=function(e){return(0,i.jsx)(m.Z,{children:(0,i.jsx)(f.Z,{enableBackBtn:!0,headerTitle:"Edit expense records",children:e})})},n.default=_}},function(e){e.O(0,[9429,6735,7700,7279,7156,2235,1843,7043,9774,2888,179],function(){return e(e.s=33912)}),_N_E=e.O()}]);