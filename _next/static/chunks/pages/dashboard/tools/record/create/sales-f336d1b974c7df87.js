(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8112],{68125:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/tools/record/create/sales",function(){return a(84876)}])},84876:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return A}});var n=a(85893),s=a(9008),t=a.n(s),r=a(67294),o=a(70757),d=a(74975),c=a(26042),i=a(70603),u=a(82580),m=a(11163),x=a(91444),h=a(16310),p=a(79405),f=a(22606),v=a(93890),j=a(90583),b=a(63240),g=a(20823),y=a(82545),N=a(62523),w=function(){var e=(0,m.useRouter)(),l=(0,i.Z)((0,p.iL)(),2),a=l[0],s=l[1].isLoading;return(0,n.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,n.jsx)(u.J9,{enableReinitialize:!0,initialValues:{description:"",customer:{name:"",phone:""},type:"sales",dealType:"product",paymentMethod:"cash",date:"2023-01-01",totalAmount:0,products:[{name:"",quantity:0,unitPrice:0},]},onSubmit:function(l){a((0,c.Z)({},l)).unwrap().then(function(){x.Am.success("Sales record created successfully!"),e.replace("/dashboard/tools/record?recordType=1")}).catch(function(e){var l;x.Am.error((null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.message)||"Couldn't create record")})},validationSchema:h.Ry({description:h.Z_().required("Required"),paymentMethod:h.Z_().required("Required"),date:h.hT().required("Required"),products:h.IX().of(h.Ry().shape({name:h.Z_().required("Required"),quantity:h.Rx().min(1,"can't be less than 1").required("Required"),unitPrice:h.Rx().min(5,"can't be less than ₦5").required("Required")})),customer:h.Ry().shape({name:h.Z_().required("Required"),phone:h.Z_().matches(/^[0-9]+$/,"Must be only digits").required("Required")})}),children:function(e){var l,a,t,r,o,d,c,i,m=e.values,x=e.touched,h=e.errors,p=e.handleChange,w=e.handleBlur,Z=e.handleSubmit,B=e.setFieldValue,C=e.dirty;return(0,n.jsxs)(u.l0,{onSubmit:function(e){return e.preventDefault()},className:"flex flex-col w-full h-full gap-6",children:[(0,n.jsx)("div",{className:"w-full flex-col flex gap-6",children:(0,n.jsx)(u.F2,{name:"products",render:function(e){var l=e.push,a=e.remove,s=e.replace;return(0,n.jsx)(n.Fragment,{children:(null==m?void 0:m.products)!==void 0&&(null==m?void 0:m.products).map(function(e,t){return(0,n.jsx)(f.Z,{product:e,productIndex:t,values:m,push:l,replace:s,remove:a,handleChange:p,handleBlur:w,setFieldValue:B},t)})})}})}),(0,n.jsxs)("div",{className:"w-full flex gap-6",children:[(0,n.jsxs)("div",{className:"flex w-[40%] h-fit flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,n.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Customer Details"}),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Customer name"}),(0,n.jsx)(g.Z,{name:"customer.name",onChange:p,onBlur:w,value:null===(l=m.customer)||void 0===l?void 0:l.name,placeholder:"Enter customer name",type:"text"}),(null===(a=x.customer)||void 0===a?void 0:a.name)&&(null===(t=h.customer)||void 0===t?void 0:t.name)&&(0,n.jsx)(b.Z,{message:(null===(r=h.customer)||void 0===r?void 0:r.name)||""})]}),(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Phone number"}),(0,n.jsx)(y.Z,{name:"customer.phone",onChange:p,onBlur:w,value:null===(o=m.customer)||void 0===o?void 0:o.phone,placeholder:"phone",type:"phone"}),(null===(d=x.customer)||void 0===d?void 0:d.phone)&&(null===(c=h.customer)||void 0===c?void 0:c.phone)&&(0,n.jsx)(b.Z,{message:(null===(i=h.customer)||void 0===i?void 0:i.phone)||""})]})]})]}),(0,n.jsxs)("div",{className:"flex w-[60%] h-fit flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,n.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Other information"}),(0,n.jsxs)("div",{className:"w-full flex gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col w-full gap-3",children:[(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Description"}),(0,n.jsx)(N.Z,{rows:5,name:"description",onChange:p,onBlur:w,value:m.description,placeholder:"Enter description"}),x.description&&h.description&&(0,n.jsx)(b.Z,{message:h.description||""})]}),(0,n.jsxs)("label",{className:"w-full flex flex-col gap-3",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Payment method"}),(0,n.jsxs)("div",{role:"group","aria-labelledby":"payment-method-group",className:"flex gap-4",children:[(0,n.jsx)(j.Z,{checked:"cash"===m.paymentMethod,type:"radio",name:"paymentMethod",onChange:p,onBlur:w,value:"cash",label:"Cash",className:"mb-md-1"}),(0,n.jsx)(j.Z,{checked:"pos"===m.paymentMethod,type:"radio",name:"paymentMethod",onChange:p,onBlur:w,value:"pos",label:"POS",className:"mb-md-1"}),(0,n.jsx)(j.Z,{checked:"transfer"===m.paymentMethod,type:"radio",name:"paymentMethod",onChange:p,onBlur:w,value:"transfer",label:"Transfer"})]}),x.paymentMethod&&h.paymentMethod&&(0,n.jsx)(b.Z,{message:h.paymentMethod||""})]})]}),(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Date"}),(0,n.jsx)(g.Z,{name:"date",onChange:p,onBlur:w,value:new Date(m.date).toLocaleDateString("en-CA")||"2022-01-01",placeholder:"Date",type:"date"}),x.date&&h.date&&(0,n.jsx)(b.Z,{message:h.date||""})]})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-6 pb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between py-4 px-6 bg-[#F8F9FA] rounded-2xl w-full",children:[(0,n.jsx)("p",{className:"text-[#808691] text-base font-normal",children:"Total Amount"}),(0,n.jsx)("p",{className:"text-[#19A97B] text-xl font-normal",children:"₦".concat(m.totalAmount.toLocaleString("en-US"))})]}),(0,n.jsx)(v.Z,{loading:s,disabled:!C||s,click:Z,title:"Create Invoice",iconPosition:"right",icon:"invoice",type:"large",color:"btnPrimary"})]})]})}})})},Z=a(32662),B=function(){var e=(0,m.useRouter)(),l=(0,i.Z)((0,p.iL)(),2),a=l[0],s=l[1].isLoading;return(0,n.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,n.jsx)(u.J9,{enableReinitialize:!0,initialValues:{customer:{name:"",phone:""},type:"sales",dealType:"service",paymentMethod:"cash",date:"2023-01-01",totalAmount:0,services:[{name:"",cost:0},]},onSubmit:function(l){a((0,c.Z)({},l)).unwrap().then(function(){x.Am.success("Sales record created successfully!"),e.replace("/dashboard/tools/record?recordType=1")}).catch(function(e){var l;x.Am.error((null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.message)||"Couldn't create record")})},validationSchema:h.Ry({paymentMethod:h.Z_().required("Required"),date:h.hT().required("Required"),services:h.IX().of(h.Ry().shape({name:h.Z_().required("Required"),cost:h.Rx().min(5,"can't be less than ₦5").required("Required")})),customer:h.Ry().shape({name:h.Z_().required("Required"),phone:h.Z_().matches(/^[0-9]+$/,"Must be only digits").required("Required")})}),children:function(e){var l,a,t,r,o,d,c,i,m=e.values,x=e.touched,h=e.errors,p=e.handleChange,f=e.handleBlur,N=e.handleSubmit,w=e.setFieldValue,B=e.dirty;return(0,n.jsxs)(u.l0,{onSubmit:function(e){return e.preventDefault()},className:"flex flex-col w-full h-full gap-6",children:[(0,n.jsx)("div",{className:"w-full flex-col flex gap-6",children:(0,n.jsx)(u.F2,{name:"services",render:function(e){var l=e.push,a=e.remove;return(0,n.jsx)(Z.Z,{values:m,push:l,remove:a,handleChange:p,handleBlur:f,setFieldValue:w})}})}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"flex w-full flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,n.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Customer Details"}),(0,n.jsxs)("div",{className:"w-full grid grid-cols-3 gap-4",children:[(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Customer name"}),(0,n.jsx)(g.Z,{name:"customer.name",onChange:p,onBlur:f,value:null===(l=m.customer)||void 0===l?void 0:l.name,placeholder:"Enter customer name",type:"text"}),(null===(a=x.customer)||void 0===a?void 0:a.name)&&(null===(t=h.customer)||void 0===t?void 0:t.name)&&(0,n.jsx)(b.Z,{message:(null===(r=h.customer)||void 0===r?void 0:r.name)||""})]}),(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Phone number"}),(0,n.jsx)(y.Z,{name:"customer.phone",onChange:p,onBlur:f,value:null===(o=m.customer)||void 0===o?void 0:o.phone,placeholder:"phone",type:"phone"}),(null===(d=x.customer)||void 0===d?void 0:d.phone)&&(null===(c=h.customer)||void 0===c?void 0:c.phone)&&(0,n.jsx)(b.Z,{message:(null===(i=h.customer)||void 0===i?void 0:i.phone)||""})]})]})]}),(0,n.jsxs)("div",{className:"flex w-full h-fit flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,n.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Other information"}),(0,n.jsxs)("div",{className:"w-full flex gap-4",children:[(0,n.jsxs)("label",{className:"w-full flex flex-col gap-3",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Payment method"}),(0,n.jsxs)("div",{role:"group","aria-labelledby":"payment-method-group",className:"flex gap-4",children:[(0,n.jsx)(j.Z,{checked:"cash"===m.paymentMethod,type:"radio",name:"paymentMethod",onChange:p,onBlur:f,value:"cash",label:"Cash",className:"mb-md-1"}),(0,n.jsx)(j.Z,{checked:"pos"===m.paymentMethod,type:"radio",name:"paymentMethod",onChange:p,onBlur:f,value:"pos",label:"POS",className:"mb-md-1"}),(0,n.jsx)(j.Z,{checked:"transfer"===m.paymentMethod,type:"radio",name:"paymentMethod",onChange:p,onBlur:f,value:"transfer",label:"Transfer"})]}),x.paymentMethod&&h.paymentMethod&&(0,n.jsx)(b.Z,{message:h.paymentMethod||""})]}),(0,n.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Date"}),(0,n.jsx)(g.Z,{name:"date",onChange:p,onBlur:f,value:new Date(m.date).toLocaleDateString("en-CA")||"2022-01-01",placeholder:"Date",type:"date"}),x.date&&h.date&&(0,n.jsx)(b.Z,{message:h.date||""})]})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-6 pb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between py-4 px-6 bg-[#F8F9FA] rounded-2xl w-full",children:[(0,n.jsx)("p",{className:"text-[#808691] text-base font-normal",children:"Total Amount"}),(0,n.jsx)("p",{className:"text-[#19A97B] text-xl font-normal",children:"₦".concat(m.totalAmount.toLocaleString("en-US"))})]}),(0,n.jsx)(v.Z,{loading:s,disabled:!B||s,click:N,title:"Create Invoice",iconPosition:"right",icon:"invoice",type:"large",color:"btnPrimary"})]})]})}})})},C=function(){var e=(0,r.useState)(1),l=e[0],a=e[1];return(0,n.jsxs)("div",{children:[(0,n.jsxs)(t(),{children:[(0,n.jsx)("title",{children:"Add sales record - Byte"}),(0,n.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,n.jsxs)("section",{className:"h-full w-full flex flex-col items-center gap-6",children:[(0,n.jsxs)("div",{className:"w-full flex items-center justify-center border-b border-[#E6EAED]",children:[(0,n.jsx)("button",{onClick:function(){return a(1)},className:"py-3 px-4 inline-flex items-center justify-center text-sm font-normal w-[25%] ".concat(1===l?"border-b border-[#5864AE] text-[#5864AE]":"text-[#808691]"),children:"Product Details"}),(0,n.jsx)("button",{onClick:function(){return a(2)},className:"py-3 px-4 inline-flex items-center justify-center text-sm font-normal w-[25%] ".concat(2===l?"border-b border-[#5864AE] text-[#5864AE]":"text-[#808691]"),children:"Service Records"})]}),(0,n.jsx)("main",{className:"flex w-full h-full",children:1===l?(0,n.jsx)(w,{}):(0,n.jsx)(B,{})})]})]})};C.getLayout=function(e){return(0,n.jsx)(d.Z,{children:(0,n.jsx)(o.Z,{enableBackBtn:!0,headerTitle:"Add sales record",children:e})})};var A=C}},function(e){e.O(0,[9429,6735,7700,7279,7156,2235,1843,2193,9774,2888,179],function(){return e(e.s=68125)}),_N_E=e.O()}]);