(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5162],{61325:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/tools/invoices/create-invoice",function(){return n(40396)}])},40396:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n(85893),l=n(9008),s=n.n(l),o=n(67294),r=n(70757),i=n(70603),u=n(82580),c=n(91444),d=n(16310),m=n(79405),x=n(47883),h=n(33513),f=n(93890),p=n(90583),v=n(63240),g=n(20823),j=n(82545),b=n(76984),y=n(62291),D=n(10904),w=function(){var e=(0,o.useState)({type:"product",paymentMethod:"online",discountPercentage:0,issuedDate:new Date().toLocaleDateString("en-CA"),dueDate:new Date().toLocaleDateString("en-CA"),products:[{name:"",quantity:0,unitPrice:0,taxPercentage:0},],subTotal:0,taxAmount:0,discountAmount:0,totalAmount:0,customer:{name:"",phone:""}}),t=e[0];e[1];var n=(0,o.useState)(!1),l=n[0],s=n[1],r=(0,o.useState)(!1),w=r[0],N=r[1],Z=(0,o.useState)(!1),A=Z[0],P=Z[1],C=function(){P(!0),setTimeout(function(){P(!1)},5e3)},B=(0,i.Z)((0,m.zx)(),2),q=B[0],E=B[1].isLoading;return(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,a.jsx)(u.J9,{enableReinitialize:!0,initialValues:{type:t.type,paymentMethod:t.paymentMethod,discountPercentage:t.discountPercentage,issuedDate:t.issuedDate,dueDate:t.dueDate,products:t.products,subTotal:t.subTotal,taxAmount:t.taxAmount,discountAmount:t.discountAmount,totalAmount:t.totalAmount,customer:t.customer},onSubmit:function(e,t){var n=t.resetForm;q(e).unwrap().then(function(){N(!1),C(),n()}).catch(function(e){var t;c.Am.error((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)||"Couldn't create invoice")})},validationSchema:d.Ry({paymentMethod:d.Z_().required("Required"),discountPercentage:d.Rx(),issuedDate:d.hT().min(new Date(new Date().toDateString()),"issued date can't be less than today").required("Required"),dueDate:d.hT().required("Required").when("issuedDate",function(e,t){return e&&t.min(e,"Due date cannot be earlier than issued date")}),products:d.IX().of(d.Ry().shape({taxPercentage:d.Rx().required("Required"),name:d.Z_().required("Required"),quantity:d.Rx().min(1,"can't be less than 1").required("Required"),unitPrice:d.Rx().min(5,"can't be less than ₦5").required("Required")})),customer:d.Ry().shape({name:d.Z_().required("Required"),phone:d.Z_().matches(/^[0-9]+$/,"Must be only digits").required("Required")})}),children:function(e){var t,n,o,r,i,c,d,m,Z=e.values,C=e.touched,B=e.errors,q=e.handleChange,R=e.handleBlur,S=e.handleSubmit,M=e.setFieldValue,T=e.dirty,k=e.isValid;return(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)(y.Z,{children:(0,a.jsx)(b.Z,{title:"You’ve generated your invoice!",message:"Congratulations! Your invoice has been successfully generated. Tap the share button below to share it to your customer.",buttonTitle:"Done",buttonOnClick:function(){return P(!1)}})}),w&&(0,a.jsx)(h.Z,{handleSubmit:S,isLoading:E,dirty:T,isValid:k,values:Z,isService:Object.prototype.hasOwnProperty.call(Z,"services"),onClose:function(){return N(!1)}}),(0,a.jsxs)(u.l0,{onSubmit:function(e){return e.preventDefault()},className:"flex flex-col w-full h-full gap-6",children:[(0,a.jsx)("div",{className:"w-full flex-col flex gap-6",children:(0,a.jsx)(u.F2,{name:"products",render:function(e){var t=e.push,n=e.remove,l=e.replace;return(0,a.jsx)(a.Fragment,{children:(null==Z?void 0:Z.products)!==void 0&&(null==Z?void 0:Z.products.map(function(e,s){return(0,a.jsx)(x.Z,{product:e,productIndex:s,values:Z,push:t,replace:l,remove:n,handleChange:q,handleBlur:R,setFieldValue:M},s)}))})}})}),(0,a.jsxs)("div",{className:"w-full flex gap-6",children:[(0,a.jsxs)("div",{className:"flex w-[40%] flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4 h-fit",children:[(0,a.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Customer Details"}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Customer name"}),(0,a.jsx)(g.Z,{name:"customer.name",onChange:q,onBlur:R,value:null===(t=Z.customer)||void 0===t?void 0:t.name,placeholder:"Enter customer name",type:"text"}),(null===(n=C.customer)||void 0===n?void 0:n.name)&&(null===(o=B.customer)||void 0===o?void 0:o.name)&&(0,a.jsx)(v.Z,{message:(null===(r=B.customer)||void 0===r?void 0:r.name)||""})]}),(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Phone number"}),(0,a.jsx)(j.Z,{name:"customer.phone",onChange:q,onBlur:R,value:null===(i=Z.customer)||void 0===i?void 0:i.phone,placeholder:"phone",type:"phone"}),(null===(c=C.customer)||void 0===c?void 0:c.phone)&&(null===(d=B.customer)||void 0===d?void 0:d.phone)&&(0,a.jsx)(v.Z,{message:(null===(m=B.customer)||void 0===m?void 0:m.phone)||""})]})]})]}),(0,a.jsxs)("div",{className:"flex w-[60%] h-fit flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,a.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Other Information"}),(0,a.jsxs)("div",{className:"w-full flex gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Date issued"}),(0,a.jsx)(g.Z,{name:"issuedDate",onChange:q,onBlur:R,value:new Date(Z.issuedDate).toLocaleDateString("en-CA"),placeholder:"Date issued",type:"date"}),C.issuedDate&&B.issuedDate&&(0,a.jsx)(v.Z,{message:B.issuedDate||""})]}),(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Payment method"}),(0,a.jsxs)("div",{role:"group","aria-labelledby":"payment-method-group",className:"flex flex-col gap-2",children:[(0,a.jsx)(p.Z,{checked:"online"===Z.paymentMethod,type:"radio",name:"paymentMethod",onChange:q,onBlur:R,value:"online",label:"Online payment",className:"mb-md-1"}),(0,a.jsx)(p.Z,{checked:"transfer"===Z.paymentMethod,type:"radio",name:"paymentMethod",onChange:q,onBlur:R,value:"transfer",label:"Bank transfer",className:"mb-md-1"}),(0,a.jsx)(p.Z,{checked:l,type:"checkbox",onChange:function(){l&&M("discountPercentage",0),s(!l)},onBlur:R,value:"discount",label:"Apply discount"})]}),C.paymentMethod&&B.paymentMethod&&(0,a.jsx)(v.Z,{message:B.paymentMethod||""})]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Expiry date"}),(0,a.jsx)(g.Z,{name:"dueDate",onChange:q,onBlur:R,value:Z.dueDate,placeholder:"Expired date",type:"date"}),C.dueDate&&B.dueDate&&(0,a.jsx)(v.Z,{message:B.dueDate||""})]}),l?(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Discount percentage"}),(0,a.jsx)(g.Z,{name:"discountPercentage",onChange:q,onBlur:R,value:Z.discountPercentage,placeholder:"Enter discount percentage",type:"number"}),C.discountPercentage&&B.discountPercentage&&(0,a.jsx)(v.Z,{message:B.discountPercentage||""})]}):null]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-6 pb-6",children:[(0,a.jsx)("div",{className:"flex flex-col items-stretch w-full",children:(0,a.jsx)(D.Z,{setFields:M?function(e,t){M("discountAmount",t),M("totalAmount",e)}:void 0,subTotal:Z.subTotal,taxAmount:Z.taxAmount,discountPercentage:Z.discountPercentage,value:" "})}),(0,a.jsx)(f.Z,{disabled:!T||E||!k,click:function(){return N(!0)},title:"Preview Invoice",iconPosition:"right",icon:"invoice",type:"large",color:"btnPrimary"})]})]})]})}})})},N=n(5042),Z=function(){var e=(0,o.useState)({type:"service",paymentMethod:"online",discountPercentage:0,issuedDate:new Date().toLocaleDateString("en-CA"),dueDate:new Date().toLocaleDateString("en-CA"),services:[{name:"",cost:0,taxPercentage:0},],subTotal:0,taxAmount:0,discountAmount:0,totalAmount:0,customer:{name:"",phone:""}}),t=e[0];e[1];var n=(0,o.useState)(!1),l=n[0],s=n[1],r=(0,o.useState)(!1),x=r[0],w=r[1],Z=(0,o.useState)(!1),A=Z[0],P=Z[1],C=function(){P(!0),setTimeout(function(){P(!1)},5e3)},B=(0,i.Z)((0,m.zx)(),2),q=B[0],E=B[1].isLoading;return(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,a.jsx)(u.J9,{enableReinitialize:!0,initialValues:{type:t.type,paymentMethod:t.paymentMethod,discountPercentage:t.discountPercentage,issuedDate:t.issuedDate,dueDate:t.dueDate,services:t.services,subTotal:t.subTotal,taxAmount:t.taxAmount,discountAmount:t.discountAmount,totalAmount:t.totalAmount,customer:t.customer},onSubmit:function(e,t){var n=t.resetForm;q(e).unwrap().then(function(){w(!1),C(),n()}).catch(function(e){var t;c.Am.error((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)||"Couldn't create invoice")})},validationSchema:d.Ry({paymentMethod:d.Z_().required("Required"),discountPercentage:d.Rx(),issuedDate:d.hT().min(new Date(new Date().toDateString()),"issued date can't be less than today").required("Required"),dueDate:d.hT().required("Required").when("issuedDate",function(e,t){return e&&t.min(e,"Due date cannot be earlier than issued date")}),services:d.IX().of(d.Ry().shape({name:d.Z_().required("Required"),cost:d.Rx().min(5,"can't be less than ₦5").required("Required"),taxPercentage:d.Rx().required("Required")})),customer:d.Ry().shape({name:d.Z_().required("Required"),phone:d.Z_().matches(/^[0-9]+$/,"Must be only digits").required("Required")})}),children:function(e){var t,n,o,r,i,c,d,m,Z=e.values,C=e.touched,B=e.errors,q=e.handleChange,R=e.handleBlur,S=e.handleSubmit,M=e.setFieldValue,T=e.dirty,k=e.isValid;return(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)(y.Z,{children:(0,a.jsx)(b.Z,{title:"You’ve generated your invoice!",message:"Congratulations! Your invoice has been successfully generated. Tap the share button below to share it to your customer.",buttonTitle:"Done",buttonOnClick:function(){return P(!1)}})}),x&&(0,a.jsx)(h.Z,{handleSubmit:S,isLoading:E,dirty:T,isValid:k,values:Z,isService:Object.prototype.hasOwnProperty.call(Z,"services"),onClose:function(){return w(!1)}}),(0,a.jsxs)(u.l0,{onSubmit:function(e){return e.preventDefault()},className:"flex flex-col w-full h-full gap-6",children:[(0,a.jsx)("div",{className:"w-full flex-col flex gap-6",children:(0,a.jsx)(u.F2,{name:"services",render:function(e){var t=e.push,n=e.remove;return(0,a.jsx)(N.Z,{values:Z,push:t,remove:n,handleChange:q,handleBlur:R,setFieldValue:M})}})}),(0,a.jsxs)("div",{className:"w-full flex gap-6",children:[(0,a.jsxs)("div",{className:"flex w-[40%] flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4 h-fit",children:[(0,a.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Customer Details"}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Customer name"}),(0,a.jsx)(g.Z,{name:"customer.name",onChange:q,onBlur:R,value:null===(t=Z.customer)||void 0===t?void 0:t.name,placeholder:"Enter customer name",type:"text"}),(null===(n=C.customer)||void 0===n?void 0:n.name)&&(null===(o=B.customer)||void 0===o?void 0:o.name)&&(0,a.jsx)(v.Z,{message:(null===(r=B.customer)||void 0===r?void 0:r.name)||""})]}),(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Phone number"}),(0,a.jsx)(j.Z,{name:"customer.phone",onChange:q,onBlur:R,value:null===(i=Z.customer)||void 0===i?void 0:i.phone,placeholder:"phone",type:"phone"}),(null===(c=C.customer)||void 0===c?void 0:c.phone)&&(null===(d=B.customer)||void 0===d?void 0:d.phone)&&(0,a.jsx)(v.Z,{message:(null===(m=B.customer)||void 0===m?void 0:m.phone)||""})]})]})]}),(0,a.jsxs)("div",{className:"flex w-[60%] h-fit flex-col border p-4 border-[#E6EAED] rounded-2xl gap-4",children:[(0,a.jsx)("p",{className:"w-full p-4 border-b border-[#D0D6DB] text-sm text-[#5864AE]",children:"Other Information"}),(0,a.jsxs)("div",{className:"w-full flex gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Date issued"}),(0,a.jsx)(g.Z,{name:"issuedDate",onChange:q,onBlur:R,value:new Date(Z.issuedDate).toLocaleDateString("en-CA"),placeholder:"Date issued",type:"date"}),C.issuedDate&&B.issuedDate&&(0,a.jsx)(v.Z,{message:B.issuedDate||""})]}),(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Payment method"}),(0,a.jsxs)("div",{role:"group","aria-labelledby":"payment-method-group",className:"flex flex-col gap-2",children:[(0,a.jsx)(p.Z,{checked:"online"===Z.paymentMethod,type:"radio",name:"paymentMethod",onChange:q,onBlur:R,value:"online",label:"Online payment",className:"mb-md-1"}),(0,a.jsx)(p.Z,{checked:"transfer"===Z.paymentMethod,type:"radio",name:"paymentMethod",onChange:q,onBlur:R,value:"transfer",label:"Bank transfer",className:"mb-md-1"}),(0,a.jsx)(p.Z,{checked:l,type:"checkbox",onChange:function(){l&&M("discountPercentage",0),s(!l)},onBlur:R,value:"discount",label:"Apply discount"})]}),C.paymentMethod&&B.paymentMethod&&(0,a.jsx)(v.Z,{message:B.paymentMethod||""})]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Expiry date"}),(0,a.jsx)(g.Z,{name:"dueDate",onChange:q,onBlur:R,value:Z.dueDate,placeholder:"Expired date",type:"date"}),C.dueDate&&B.dueDate&&(0,a.jsx)(v.Z,{message:B.dueDate||""})]}),l?(0,a.jsxs)("label",{className:"w-full flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-[#30333B] font-normal",children:"Discount percentage"}),(0,a.jsx)(g.Z,{name:"discountPercentage",onChange:q,onBlur:R,value:Z.discountPercentage,placeholder:"Enter discount percentage",type:"number"}),C.discountPercentage&&B.discountPercentage&&(0,a.jsx)(v.Z,{message:B.discountPercentage||""})]}):null]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-6 pb-6",children:[(0,a.jsx)("div",{className:"flex flex-col items-stretch w-full",children:(0,a.jsx)(D.Z,{setFields:M?function(e,t){M("discountAmount",t),M("totalAmount",e)}:void 0,subTotal:Z.subTotal,taxAmount:Z.taxAmount,discountPercentage:Z.discountPercentage,value:" "})}),(0,a.jsx)(f.Z,{disabled:!T||E||!k,click:function(){return w(!0)},title:"Preview Invoice",iconPosition:"right",icon:"invoice",type:"large",color:"btnPrimary"})]})]})]})}})})},A=n(74975),P=function(){var e=(0,o.useState)(1),t=e[0],n=e[1];return(0,a.jsxs)("div",{children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:"Create invoice - Byte"}),(0,a.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,a.jsxs)("section",{className:"h-full w-full flex flex-col items-center gap-6",children:[(0,a.jsxs)("div",{className:"w-full flex items-center justify-center border-b border-[#E6EAED]",children:[(0,a.jsx)("button",{onClick:function(){return n(1)},className:"py-3 px-4 inline-flex items-center justify-center text-sm font-normal w-[25%] ".concat(1===t?"border-b border-[#5864AE] text-[#5864AE]":"text-[#808691]"),children:"Product details"}),(0,a.jsx)("button",{onClick:function(){return n(2)},className:"py-3 px-4 inline-flex items-center justify-center text-sm font-normal w-[25%] ".concat(2===t?"border-b border-[#5864AE] text-[#5864AE]":"text-[#808691]"),children:"Service details"})]}),(0,a.jsx)("main",{className:"flex w-full h-full",children:1===t?(0,a.jsx)(w,{}):(0,a.jsx)(Z,{})})]})]})};P.getLayout=function(e){return(0,a.jsx)(A.Z,{children:(0,a.jsx)(r.Z,{enableBackBtn:!0,headerTitle:"Create invoice",children:e})})};var C=P}},function(e){e.O(0,[9429,6735,7700,7279,7156,2235,1843,1619,9774,2888,179],function(){return e(e.s=61325)}),_N_E=e.O()}]);